# Base Configuration (shared across all environments)
# Environment-specific overrides:
# - Local: values/local.yaml
# - Production: values/prod.yaml

namespace: celery

image:
  repository: celery-workflows
  # tag and pullPolicy are set in environment-specific files

# replicaCount is set in environment-specific files

redis:
  image: redis:7
  port: 6379
  # storage is set in environment-specific files

api:
  port: 8000
  # nodePort and resources are set in environment-specific files

flower:
  port: 5555
  # nodePort and resources are set in environment-specific files

# worker resources are set in environment-specific files
worker: {}

seaweedfs:
  enabled: true

  master:
    # replicas, data (size, storageClass), and resources are set in environment-specific files
    data:
      type: "persistentVolumeClaim"

  volume:
    # replicas, dataDirs, and resources are set in environment-specific files
    dataDirs:
      - name: data
        type: "persistentVolumeClaim"
        maxVolumes: 0

  filer:
    enabled: true
    port: 8899
    # nodePort, data (size, storageClass), and resources are set in environment-specific files
    data:
      type: "persistentVolumeClaim"

  s3:
    enabled: true
    enabledAuth: true
    existingConfigSecret: seaweedfs
    port: 8333
    service:
      type: ClusterIP
    # resources are set in environment-specific files

longhorn:
  # enabled is set in environment-specific files
  defaultSettings:
    defaultDataPath: /var/lib/longhorn
  csi:
    kubeletRootDir: /var/lib/kubelet
  persistence:
    defaultClass: true
    # defaultClassReplicaCount is set in environment-specific files
  longhornManager:
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 256Mi
  longhornDriver:
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 256Mi

velero:
  # enabled is set in environment-specific files
  s3:
    bucket: velero-backups
    accessKey: accessKey
    secretKey: secretKey
    region: us-east-1
  bsl:
    name: seaweedfs-bsl
  schedule:
    # enabled is set in environment-specific files
    name: celery-daily-backup
    cron: "0 2 * * *"
    ttl: 720h
